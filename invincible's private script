-- Invincibles Priv Script – FULLY RESTORED & FIXED (February 2026)
-- All features from your original code included & stabilized

local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library"))()
local window = library:AddWindow("Invincibles Priv Script", {
    main_color = Color3.fromRGB(50, 50, 50),
    min_size = Vector2.new(470, 470),
    can_resize = false,
})

-- Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local VirtualInputManager = game:GetService("VirtualInputManager")

local muscleEvent = LocalPlayer:WaitForChild("muscleEvent", 10)
local rEvents = ReplicatedStorage:WaitForChild("rEvents", 10)

-- States
local states = {
    AutoPushups = false,
    AutoWeight = false,
    AutoHandstands = false,
    FastPunch = false,
    InfiniteJump = false,
    FastStrength = false,
    HidePets = false,
    KillAura = false,
    AutoKillSelected = false,
}

getgenv().rockFarmActive = false
getgenv().selectedRockDurability = 0
getgenv().killAura = false
getgenv().autoKillSelected = false

-- Tabs
local mainTab = window:AddTab("Main")
local fastFarmTab = window:AddTab("Fast Farming")
local rebirthTab = window:AddTab("Rebirth")
local teleportTab = window:AddTab("Teleport")
local killTab = window:AddTab("Kill")
local miscTab = window:AddTab("Misc")

local toolsFolder = mainTab:AddFolder("Tools")
local rockFarmFolder = mainTab:AddFolder("Rock Farm")
local killFolder = killTab:AddFolder("Auto Kill")

-- Helpers
local function tpTo(pos)
    pcall(function()
        local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if hrp then hrp.CFrame = CFrame.new(pos) end
    end)
end

local function equipTool(toolName)
    pcall(function()
        local char = LocalPlayer.Character
        if not char or not char:FindFirstChild("Humanoid") then return end
        local tool = LocalPlayer.Backpack:FindFirstChild(toolName) or char:FindFirstChild(toolName)
        if tool and tool.Parent ~= char then char.Humanoid:EquipTool(tool) end
    end)
end

local function unequipAllPets()
    pcall(function()
        local pets = LocalPlayer:FindFirstChild("petsFolder")
        if not pets then return end
        for _, f in pets:GetChildren() do
            if f:IsA("Folder") then
                for _, pet in f:GetChildren() do
                    rEvents.equipPetEvent:FireServer("unequipPet", pet)
                end
            end
        end
    end)
    task.wait(0.12)
end

local function equipPet(petName)
    unequipAllPets()
    task.wait(0.15)
    local unique = LocalPlayer.petsFolder and LocalPlayer.petsFolder:FindFirstChild("Unique")
    if not unique then return end
    for _, pet in unique:GetChildren() do
        if pet.Name == petName then
            rEvents.equipPetEvent:FireServer("equipPet", pet)
            break
        end
    end
end

-- Auto Rep
local function startAutoRep(toolName, key)
    task.spawn(function()
        while states[key] do
            pcall(function()
                local char = LocalPlayer.Character
                if not char or char.Humanoid.Health <= 0 then task.wait(1.5) return end
                equipTool(toolName)
                muscleEvent:FireServer("rep")
            end)
            task.wait(0.025)
        end
    end)
end

toolsFolder:AddSwitch("Auto Pushups", function(s) states.AutoPushups = s if s then startAutoRep("Pushups", "AutoPushups") end end)
toolsFolder:AddSwitch("Auto Weight", function(s) states.AutoWeight = s if s then startAutoRep("Weight", "AutoWeight") end end)
toolsFolder:AddSwitch("Auto Handstands", function(s) states.AutoHandstands = s if s then startAutoRep("Handstands", "AutoHandstands") end end)

toolsFolder:AddSwitch("Auto Punch (Fast)", function(s)
    states.FastPunch = s
    if s then
        task.spawn(function()
            while states.FastPunch do
                pcall(function()
                    muscleEvent:FireServer("punch", "rightHand")
                    muscleEvent:FireServer("punch", "leftHand")
                    equipTool("Punch")
                    local punch = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Punch")
                    if punch then
                        local atk = punch:FindFirstChild("attackTime")
                        if atk and atk:IsA("NumberValue") then atk.Value = 0.01 end
                        punch:Activate()
                    end
                end)
                task.wait(0.035)
            end
        end)
    end
end)

-- Fast Strength
local fastStrConn
fastFarmTab:AddSwitch("Fast Grind / Strength", function(s)
    states.FastStrength = s
    if s then
        fastStrConn = RunService.Heartbeat:Connect(function()
            pcall(function()
                muscleEvent:FireServer("rep")
                muscleEvent:FireServer("punch", "rightHand")
                muscleEvent:FireServer("punch", "leftHand")
                local tool = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildWhichIsA("Tool")
                if tool then tool:Activate() end
            end)
        end)
    else
        if fastStrConn then fastStrConn:Disconnect() fastStrConn = nil end
    end
end)

-- Rock Farm
task.spawn(function()
    while true do
        if not getgenv().rockFarmActive or getgenv().selectedRockDurability == 0 then task.wait(0.5) continue end
        pcall(function()
            local char = LocalPlayer.Character
            if not char or char.Humanoid.Health <= 0 then task.wait(1) return end
            local dur = LocalPlayer:FindFirstChild("Durability")
            if not dur or dur.Value < getgenv().selectedRockDurability then task.wait(0.4) return end
            equipTool("Punch")
            for _, obj in Workspace.machinesFolder:GetDescendants() do
                if obj.Name == "neededDurability" and obj:IsA("IntValue") and obj.Value == getgenv().selectedRockDurability then
                    local rock = obj.Parent:FindFirstChild("Rock")
                    if rock and rock:IsA("BasePart") then
                        if char:FindFirstChild("RightHand") then firetouchinterest(rock, char.RightHand, 0) task.wait(0.015) firetouchinterest(rock, char.RightHand, 1) end
                        if char:FindFirstChild("LeftHand") then firetouchinterest(rock, char.LeftHand, 0) task.wait(0.015) firetouchinterest(rock, char.LeftHand, 1) end
                        muscleEvent:FireServer("punch", "leftHand")
                        muscleEvent:FireServer("punch", "rightHand")
                    end
                end
            end
        end)
        task.wait(0.12 + math.random()/25)
    end
end)

local rocks = {
    {name = "Tiny Island Rock (0)", dur = 0},
    {name = "Starter Island Rock (100)", dur = 100},
    {name = "Legend Beach Rock (5000)", dur = 5000},
    {name = "Frost Gym Rock (150k)", dur = 150000},
    {name = "Mythical Gym Rock (400k)", dur = 400000},
    {name = "Eternal Gym Rock (750k)", dur = 750000},
    {name = "Legend Gym Rock (1M)", dur = 1000000},
    {name = "Muscle King Gym Rock (5M)", dur = 5000000},
    {name = "Ancient Jungle Rock (10M)", dur = 10000000},
}

for _, r in rocks do
    rockFarmFolder:AddSwitch("Farm " .. r.name, function(s)
        getgenv().rockFarmActive = s
        getgenv().selectedRockDurability = s and r.dur or 0
    end)
end

rockFarmFolder:AddButton("STOP All Rock Farming", function()
    getgenv().rockFarmActive = false
    getgenv().selectedRockDurability = 0
end)

-- Teleports
teleportTab:AddButton("To Spawn / Safe Area", function() tpTo(Vector3.new(-6, 5, -196)) end)
teleportTab:AddButton("To Secret Area", function() tpTo(Vector3.new(1947, 2, 6191)) end)
teleportTab:AddButton("To Tiny Area", function() tpTo(Vector3.new(-39, 6, 1886)) end)
teleportTab:AddButton("To Frozen Area", function() tpTo(Vector3.new(-2623, 6, -409)) end)
teleportTab:AddButton("To Mythical Area", function() tpTo(Vector3.new(2251, 6, 1073)) end)
teleportTab:AddButton("To Inferno Area", function() tpTo(Vector3.new(-6759, 6, -1285)) end)
teleportTab:AddButton("To Legend Area", function() tpTo(Vector3.new(4603, 990, -3898)) end)
teleportTab:AddButton("To Muscle King Area", function() tpTo(Vector3.new(-8626, 16, -5730)) end)
teleportTab:AddButton("To Jungle Area", function() tpTo(Vector3.new(-8642, 6, 2381)) end)
teleportTab:AddButton("To Lava Brawl", function() tpTo(Vector3.new(4471, 119, -8836)) end)
teleportTab:AddButton("To Desert Brawl", function() tpTo(Vector3.new(960, 17, -7398)) end)
teleportTab:AddButton("To Beach Brawl", function() tpTo(Vector3.new(-1849, 20, -6335)) end)

-- Rebirth
local targetRebirths = 1
rebirthTab:AddInput("Target Rebirths", {PlaceholderText = "Enter target rebirths", Numeric = true, Callback = function(v) local n = tonumber(v) if n then targetRebirths = n end end})

local autoRebirthTarget = false
rebirthTab:AddSwitch("Auto Rebirth (Target)", function(s)
    autoRebirthTarget = s
    if s then
        task.spawn(function()
            local rs = LocalPlayer.leaderstats.Rebirths
            local rem = rEvents.rebirthRemote
            while autoRebirthTarget do
                if rs.Value >= targetRebirths then autoRebirthTarget = false break end
                pcall(function() rem:InvokeServer("rebirthRequest") end)
                task.wait(0.8)
            end
        end)
    end
end)

local autoRebirthInf = false
rebirthTab:AddSwitch("Auto Rebirth (Infinite)", function(s)
    autoRebirthInf = s
    if s then
        task.spawn(function()
            local rem = rEvents.rebirthRemote
            while autoRebirthInf do
                pcall(function() rem:InvokeServer("rebirthRequest") end)
                task.wait(0.6)
            end
        end)
    end
end)

local autoSize2 = false
rebirthTab:AddSwitch("Auto Size 2", function(s)
    autoSize2 = s
    if s then
        task.spawn(function()
            local rem = rEvents.changeSpeedSizeRemote
            while autoSize2 do
                pcall(function() rem:InvokeServer("changeSize", 2) end)
                task.wait(0.4)
            end
        end)
    end
end)

local kingTpActive = false
rebirthTab:AddSwitch("Auto Teleport to King", function(s)
    kingTpActive = s
    if s then
        task.spawn(function()
            while kingTpActive do
                tpTo(Vector3.new(-8646, 17, -5738))
                task.wait(0.5)
            end
        end)
    end
end)

-- Ultimate Farm (pets + rebirth cycle)
local ultimateFarm = false
fastFarmTab:AddSwitch("Fast Rebirths (UltimateFarm)", function(s)
    ultimateFarm = s
    if s then
        task.spawn(function()
            while ultimateFarm do
                pcall(function()
                    local rebirths = LocalPlayer.leaderstats.Rebirths.Value
                    local targetStr = 10000 + (5000 * rebirths)
                    local golden = LocalPlayer.ultimatesFolder["Golden Rebirth"]
                    if golden then targetStr = math.floor(targetStr * (1 - golden.Value * 0.1)) end

                    unequipAllPets()
                    equipPet("Swift Samurai") -- Equip one at a time for stability
                    equipPet("Darkstar Hunter")

                    while ultimateFarm and LocalPlayer.leaderstats.Strength.Value < targetStr do
                        for _ = 1, 12 do muscleEvent:FireServer("rep") end
                        task.wait()
                    end

                    unequipAllPets()
                    equipPet("Tribal Overlord")

                    local lift = Workspace.machinesFolder["Jungle Bar Lift"] or Workspace:FindFirstChild("Jungle Bar Lift", true)
                    if lift and lift:FindFirstChild("interactSeat") then
                        LocalPlayer.Character.HumanoidRootPart.CFrame = lift.interactSeat.CFrame * CFrame.new(0,3,0)
                        repeat
                            task.wait(0.1)
                            VirtualInputManager:SendKeyEvent(true, "E", false, game)
                            task.wait(0.05)
                            VirtualInputManager:SendKeyEvent(false, "E", false, game)
                        until LocalPlayer.Character.Humanoid.Sit
                    end

                    local old = LocalPlayer.leaderstats.Rebirths.Value
                    repeat
                        rEvents.rebirthRemote:InvokeServer("rebirthRequest")
                        task.wait(0.3)
                    until LocalPlayer.leaderstats.Rebirths.Value > old
                end)
                task.wait(1)
            end
        end)
    end
end)

-- Fast Strength (simple)
local fastGrind = false
fastFarmTab:AddSwitch("Fast Strength Gain", function(s)
    fastGrind = s
    if s then
        task.spawn(function()
            while fastGrind do
                equipPet("Swift Samurai")
                for _ = 1, 30 do muscleEvent:FireServer("rep") end
                task.wait(0.02)
            end
        end)
    end
end)

-- Hide Frames
fastFarmTab:AddSwitch("Hide All Frames", function(s)
    for _, obj in ReplicatedStorage:GetChildren() do
        if obj.Name:match("Frame$") then
            obj.Visible = not s
        end
    end
end)

-- Kill
local function killPlr(plr)
    pcall(function()
        local char = LocalPlayer.Character
        local tchar = plr.Character
        if not (char and tchar and tchar.HumanoidRootPart and tchar.Humanoid.Health > 0) then return end
        local hand = char.LeftHand or char.RightHand
        if hand then
            firetouchinterest(tchar.HumanoidRootPart, hand, 0) task.wait() firetouchinterest(tchar.HumanoidRootPart, hand, 1)
        end
        equipTool("Punch")
        muscleEvent:FireServer("punch", "leftHand")
        muscleEvent:FireServer("punch", "rightHand")
    end)
end

killFolder:AddSwitch("Kill Aura (All)", function(s)
    getgenv().killAura = s
    if s then
        task.spawn(function()
            while getgenv().killAura do
                for _, p in Players:GetPlayers() do
                    if p ~= LocalPlayer then killPlr(p) end
                end
                task.wait(0.08)
            end
        end)
    end
end)

local selTarget = nil
local dd = killFolder:AddDropdown("Select Target Player", function(v)
    selTarget = v:match("^([^|]+)") or v
end)

task.spawn(function()
    while true do
        local opts = {}
        for _, p in Players:GetPlayers() do
            if p ~= LocalPlayer then table.insert(opts, p.Name .. " | " .. (p.DisplayName or p.Name)) end
        end
        dd:SetValues(opts)
        task.wait(5)
    end
end)

killFolder:AddSwitch("Auto Kill Selected", function(s)
    getgenv().autoKillSelected = s
    if s and selTarget then
        task.spawn(function()
            while getgenv().autoKillSelected do
                local p = Players:FindFirstChild(selTarget)
                if p then killPlr(p) end
                task.wait(0.08)
            end
        end)
    end
end)

-- Misc
miscTab:AddSwitch("Infinite Jump", function(s) states.InfiniteJump = s end)
UserInputService.JumpRequest:Connect(function()
    if states.InfiniteJump and LocalPlayer.Character then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)

miscTab:AddSwitch("Hide Pets", function(s)
    states.HidePets = s
    rEvents.showPetsEvent:FireServer(s and "hidePets" or "showPets")
end)

toolsFolder:AddButton("Anti Lag (Boost FPS)", function()
    local L = game.Lighting
    L.GlobalShadows = false L.Brightness = 1 L.ClockTime = 12 L.FogEnd = 9999
    for _, v in Workspace:GetDescendants() do
        if v:IsA("ParticleEmitter") or v:IsA("Smoke") or v:IsA("Fire") or v:IsA("Sparkles") or v:IsA("BloomEffect") or v:IsA("BlurEffect") or v:IsA("DepthOfFieldEffect") or v:IsA("SunRaysEffect") then
            v.Enabled = false
        end
    end
    settings().Rendering.QualityLevel = "Level01"
end)

toolsFolder:AddButton("Free AutoLift Gamepass", function()
    pcall(function()
        local gpf = ReplicatedStorage.gamepassIds
        if gpf then
            local owned = LocalPlayer:FindFirstChild("ownedGamepasses") or Instance.new("Folder")
            owned.Name = "ownedGamepasses" owned.Parent = LocalPlayer
            for _, gp in gpf:GetChildren() do
                local iv = Instance.new("IntValue", owned)
                iv.Name = gp.Name iv.Value = gp.Value
            end
        end
    end)
end)

print("Invincibles Priv Script – ALL FEATURES RESTORED & FIXED (Feb 2026)")
