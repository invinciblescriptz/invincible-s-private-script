local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library", true))()
local window = library:AddWindow("Invincibles Priv Script", {
    main_color = Color3.fromRGB(0, 0, 0),
    min_size = Vector2.new(470, 470),
    can_resize = false,
})

local main = window:AddTab("Main")
local Tools = main:AddFolder("Tools")
local Rocks = main:AddFolder("Rocks")  -- ← added here

-- Your existing helper function (good as-is)
local function startAutoRep(toolName, toggleVar)
    task.spawn(function()
        while _G[toggleVar] do
            local player = game.Players.LocalPlayer
            local character = player.Character or player.CharacterAdded:Wait()
            if not character or not character:FindFirstChild("Humanoid") then
                task.wait(1)
                continue
            end

            -- Auto-equip
            local tool = player.Backpack:FindFirstChild(toolName)
            if tool then
                character.Humanoid:EquipTool(tool)
            end

            -- Fire rep
            local muscleEvent = player:FindFirstChild("muscleEvent")
            if muscleEvent then
                muscleEvent:FireServer("rep")
            end

            task.wait(0.025)  -- fast but usually safe
        end

        -- Unequip on disable
        local player = game.Players.LocalPlayer
        local character = player.Character
        if character then
            local equipped = character:FindFirstChild(toolName)
            if equipped then
                equipped.Parent = player.Backpack
            end
        end
    end)
end

-- Your switches (unchanged, they look fine)
Tools:AddSwitch("Auto Pushups", function(state)
    _G.AutoPushups = state
    if state then startAutoRep("Pushups", "AutoPushups") end
end)

Tools:AddSwitch("Auto Weight", function(state)
    _G.AutoWeight = state
    if state then startAutoRep("Weight", "AutoWeight") end
end)

Tools:AddSwitch("Auto Handstands", function(state)
    _G.AutoHandstands = state
    if state then startAutoRep("Handstands", "AutoHandstands") end
end)

-- Fast Punch (yours is decent; minor safety)
Tools:AddSwitch("Fast Punch", function(state)
    _G.FastPunch = state
    if state then
        -- Cooldown remover
        task.spawn(function()
            while _G.FastPunch do
                local punch = game.Players.LocalPlayer.Backpack:FindFirstChild("Punch") or (game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("Punch"))
                if punch and punch:FindFirstChild("attackTime") then
                    punch.attackTime.Value = 0
                end
                task.wait(0.3)
            end
        end)

        -- Spam fire + activate
        task.spawn(function()
            while _G.FastPunch do
                local muscleEvent = game.Players.LocalPlayer:FindFirstChild("muscleEvent")
                if muscleEvent then
                    muscleEvent:FireServer("punch", "rightHand")
                    muscleEvent:FireServer("punch", "leftHand")
                end
                local char = game.Players.LocalPlayer.Character
                if char and char:FindFirstChild("Punch") then
                    char.Punch:Activate()
                end
                task.wait(0.065)  -- 0.08–0.1 more stable on many servers
            end
        end)
    end
end)

-- Anti-Lag button (yours is solid; added a few extras)
Tools:AddButton("Anti Lag (Boost FPS)", function()
    local Lighting = game:GetService("Lighting")
    local Workspace = game:GetService("Workspace")

    Lighting.GlobalShadows = false
    Lighting.Brightness = 1
    Lighting.ClockTime = 12
    Lighting.FogEnd = 9999
    Lighting.FogStart = 0

    for _, v in pairs(Workspace:GetDescendants()) do
        if v:IsA("ParticleEmitter") or v:IsA("Smoke") or v:IsA("Fire") or v:IsA("Sparkles") or
           v:IsA("BloomEffect") or v:IsA("BlurEffect") or v:IsA("DepthOfFieldEffect") or v:IsA("SunRaysEffect") then
            v.Enabled = false
        end
    end

    settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
    print("Anti-Lag activated → check FPS (Shift+F5)")
end)

-- Ancient Jungle Rock farm (modernized touch → better method)
-- Most Muscle Legends scripts now use magnitude check + CFrame or network ownership tricks
Rocks:AddSwitch("Auto Farm Ancient Jungle Rock", function(state)
    getgenv().autoFarmRock = state
    getgenv().selectedRock = "Ancient Jungle Rock"  -- or make dropdown later

    task.spawn(function()
        while getgenv().autoFarmRock do
            local player = game.Players.LocalPlayer
            if player.Durability.Value < 10000000 then
                task.wait(1)
                continue
            end

            for _, obj in pairs(game.Workspace.machinesFolder:GetDescendants()) do
                if obj.Name == "neededDurability" and obj.Value == 10000000 and
                   obj.Parent and obj.Parent:FindFirstChild("Rock") and
                   obj.Parent.Rock.Name == getgenv().selectedRock then

                    local rock = obj.Parent.Rock
                    local hrp = player.Character and player.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then
                        -- Teleport style (safer than firetouchinterest in 2025–2026)
                        hrp.CFrame = rock.CFrame * CFrame.new(0, 3, 0)
                        task.wait(0.1)
                    end
                end
            end
            task.wait(0.4)  -- don't hammer too hard
        end
    end)
end)
