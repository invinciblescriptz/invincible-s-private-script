-- =============================================
-- Invincible Paid – FULL CLEANED + GOOD/EVIL KARMA KILL
-- Updated Feb 2026 – elerium-v2 only (no mixed libraries)
-- =============================================

local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library"))()
local window = library:AddWindow("Invincible Paid", {
    main_color = Color3.fromRGB(139, 0, 0),
    min_size = Vector2.new(520, 520),
    can_resize = false,
})

-- Services
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")

local muscleEvent = LocalPlayer:WaitForChild("muscleEvent", 10)

getgenv().NexusRunning = true

local states = {
    AutoPushups = false,
    AutoWeight = false,
    AutoHandstands = false,
    FastPunch = false,
    FastStrength = false,
    InfiniteJump = false,
    AntiAfk = false,
    KillAura = false,
    AutoKillSelected = false,
    AutoRebirth = false,
    AutoRebirthTarget = false,
    KillGoodKarma = false,
    KillEvilKarma = false,
}

local targetRebirths = 1
local selectedTarget = nil

getgenv().rockFarmActive = false
getgenv().selectedRockDurability = 0

-- =============================================================
-- Helpers
-- =============================================================
local function tpTo(pos)
    pcall(function()
        local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if hrp then hrp.CFrame = CFrame.new(pos) end
    end)
end

local function startAutoRep(toolName, stateKey)
    task.spawn(function()
        while states[stateKey] and getgenv().NexusRunning do
            pcall(function()
                local char = LocalPlayer.Character
                if not char or not char:FindFirstChild("Humanoid") or char.Humanoid.Health <= 0 then task.wait(1.5) return end
                local tool = LocalPlayer.Backpack:FindFirstChild(toolName) or char:FindFirstChild(toolName)
                if tool and tool.Parent ~= char then char.Humanoid:EquipTool(tool) end
                if muscleEvent then muscleEvent:FireServer("rep") end
            end)
            task.wait(0.07)
        end
    end)
end

local fastStrengthConn
local function toggleFastStrength(state)
    states.FastStrength = state
    if state then
        if fastStrengthConn then fastStrengthConn:Disconnect() end
        fastStrengthConn = RunService.Heartbeat:Connect(function()
            pcall(function()
                if muscleEvent then
                    muscleEvent:FireServer("rep")
                    muscleEvent:FireServer("punch", "rightHand")
                    muscleEvent:FireServer("punch", "leftHand")
                end
            end)
        end)
    else
        if fastStrengthConn then fastStrengthConn:Disconnect() fastStrengthConn = nil end
    end
end

local jumpConn
local function toggleInfiniteJump(state)
    states.InfiniteJump = state
    if state then
        if jumpConn then jumpConn:Disconnect() end
        jumpConn = UserInputService.JumpRequest:Connect(function()
            pcall(function()
                local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
                if hum then hum:ChangeState(Enum.HumanoidStateType.Jumping) end
            end)
        end)
    else
        if jumpConn then jumpConn:Disconnect() jumpConn = nil end
    end
end

local antiAfkConn
local function toggleAntiAfk(state)
    states.AntiAfk = state
    if state then
        if antiAfkConn then antiAfkConn:Disconnect() end
        antiAfkConn = LocalPlayer.Idled:Connect(function()
            VirtualUser:CaptureController()
            VirtualUser:ClickButton2(Vector2.new())
        end)
    else
        if antiAfkConn then antiAfkConn:Disconnect() antiAfkConn = nil end
    end
end

local function equipPunch()
    pcall(function()
        local char = LocalPlayer.Character
        local punch = char and char:FindFirstChild("Punch") or LocalPlayer.Backpack:FindFirstChild("Punch")
        if punch and punch.Parent ~= char then
            char.Humanoid:EquipTool(punch)
        end
    end)
end

local function karmaKill(target, isGoodKarmaTarget)
    pcall(function()
        local char = LocalPlayer.Character
        local tChar = target.Character
        if not char or not tChar then return end

        local leftHand = char:FindFirstChild("LeftHand")
        local goodK = target:FindFirstChild("goodKarma")
        local evilK = target:FindFirstChild("evilKarma")

        if not leftHand or not goodK or not evilK then return end

        local shouldKill = isGoodKarmaTarget and (goodK.Value > evilK.Value) or (evilK.Value > goodK.Value)
        if not shouldKill then return end

        equipPunch()

        -- Fast CFrame attach kill (most reliable in 2026 for this game)
        local head = tChar:FindFirstChild("Head")
        if head then
            head.CFrame = leftHand.CFrame
        end
        for _, part in pairs(tChar:GetDescendants()) do
            if part:IsA("BasePart") then
                part.CFrame = leftHand.CFrame
            end
        end
    end)
end

local function simpleKill(target)
    pcall(function()
        local myHRP = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        local tHRP = target.Character and target.Character:FindFirstChild("HumanoidRootPart")
        if myHRP and tHRP then
            myHRP.CFrame = tHRP.CFrame * CFrame.new(0, -30, 0)
        end
    end)
end

-- =============================================================
-- Tabs
-- =============================================================
local mainTab     = window:AddTab("Main")
local farmTab     = window:AddTab("Farming")
local rebirthTab  = window:AddTab("Rebirth")
local teleportTab = window:AddTab("Teleport")
local killerTab   = window:AddTab("Killer")
local miscTab     = window:AddTab("Misc")

local toolsFolder = mainTab:AddFolder("Auto Tools")
local rockFolder  = mainTab:AddFolder("Rock Farm")
local killFolder  = killerTab:AddFolder("Kill Options")

-- ==================== MAIN ====================
toolsFolder:AddSwitch("Auto Pushups",    function(s) states.AutoPushups   = s if s then startAutoRep("Pushups",   "AutoPushups")   end end)
toolsFolder:AddSwitch("Auto Weight",     function(s) states.AutoWeight    = s if s then startAutoRep("Weight",    "AutoWeight")    end end)
toolsFolder:AddSwitch("Auto Handstands", function(s) states.AutoHandstands = s if s then startAutoRep("Handstands","AutoHandstands") end end)

toolsFolder:AddSwitch("Fast Punch", function(s)
    states.FastPunch = s
    if s then
        task.spawn(function()
            while states.FastPunch and getgenv().NexusRunning do
                pcall(function()
                    if muscleEvent then
                        muscleEvent:FireServer("punch", "rightHand")
                        muscleEvent:FireServer("punch", "leftHand")
                    end
                end)
                task.wait(0.08)
            end
        end)
    end
end)

toolsFolder:AddSwitch("Fast Grind / Strength", toggleFastStrength)

toolsFolder:AddButton("Anti-Lag (FPS Boost)", function()
    local l = game:GetService("Lighting")
    l.GlobalShadows = false
    l.Brightness = 1
    l.FogEnd = 9999
    settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
end)

toolsFolder:AddButton("Free AutoLift Gamepass", function()
    pcall(function()
        local gp = ReplicatedStorage:FindFirstChild("gamepassIds")
        if gp then
            local owned = LocalPlayer:FindFirstChild("ownedGamepasses") or Instance.new("Folder")
            owned.Name = "ownedGamepasses"
            owned.Parent = LocalPlayer
            for _, v in pairs(gp:GetChildren()) do
                local val = Instance.new("IntValue")
                val.Name = v.Name
                val.Value = v.Value
                val.Parent = owned
            end
        end
    end)
end)

-- ==================== ROCK FARM ====================
local function setRockFarm(dur, s)
    if s then
        getgenv().selectedRockDurability = dur
        getgenv().rockFarmActive = true
    else
        if getgenv().selectedRockDurability == dur then
            getgenv().rockFarmActive = false
            getgenv().selectedRockDurability = 0
        end
    end
end

rockFolder:AddSwitch("Farm Tiny Island Rock (0)",      function(s) setRockFarm(0, s) end)
rockFolder:AddSwitch("Farm Starter Island Rock (100)", function(s) setRockFarm(100, s) end)
rockFolder:AddSwitch("Farm Legend Beach Rock (5000)",  function(s) setRockFarm(5000, s) end)
rockFolder:AddSwitch("Farm Frost Gym Rock (150k)",     function(s) setRockFarm(150000, s) end)
rockFolder:AddSwitch("Farm Mythical Gym Rock (400k)",  function(s) setRockFarm(400000, s) end)
rockFolder:AddSwitch("Farm Eternal Gym Rock (750k)",   function(s) setRockFarm(750000, s) end)
rockFolder:AddSwitch("Farm Legend Gym Rock (1M)",      function(s) setRockFarm(1000000, s) end)
rockFolder:AddSwitch("Farm Muscle King Gym Rock (5M)", function(s) setRockFarm(5000000, s) end)
rockFolder:AddSwitch("Farm Ancient Jungle Rock (10M)", function(s) setRockFarm(10000000, s) end)

rockFolder:AddButton("STOP All Rock Farming", function()
    getgenv().rockFarmActive = false
    getgenv().selectedRockDurability = 0
end)

-- Rock farm loop
task.spawn(function()
    while getgenv().NexusRunning do
        if not getgenv().rockFarmActive or getgenv().selectedRockDurability <= 0 then task.wait(0.8) continue end
        pcall(function()
            local char = LocalPlayer.Character
            if not char or char.Humanoid.Health <= 0 then return end
            local dur = LocalPlayer:FindFirstChild("Durability")
            if not dur or dur.Value < getgenv().selectedRockDurability then return end

            local punch = char:FindFirstChild("Punch") or LocalPlayer.Backpack:FindFirstChild("Punch")
            if punch and punch.Parent ~= char then char.Humanoid:EquipTool(punch) end

            for _, obj in pairs(Workspace.machinesFolder:GetDescendants()) do
                if obj.Name == "neededDurability" and obj.Value == getgenv().selectedRockDurability then
                    local rock = obj.Parent:FindFirstChild("Rock")
                    if rock then
                        if char:FindFirstChild("RightHand") then
                            firetouchinterest(rock, char.RightHand, 0) task.wait(0.03) firetouchinterest(rock, char.RightHand, 1)
                        end
                    end
                end
            end
            if muscleEvent then
                muscleEvent:FireServer("punch", "leftHand")
                muscleEvent:FireServer("punch", "rightHand")
            end
        end)
        task.wait(0.17)
    end
end)

-- ==================== TELEPORT ====================
local tps = {
    {"Spawn / Safe",      Vector3.new(-6,5,-196)},
    {"Secret Area",       Vector3.new(1947,2,6191)},
    {"Tiny Area",         Vector3.new(-39,6,1886)},
    {"Frozen Area",       Vector3.new(-2623,6,-409)},
    {"Mythical Area",     Vector3.new(2251,6,1073)},
    {"Inferno Area",      Vector3.new(-6759,6,-1285)},
    {"Legend Area",       Vector3.new(4603,990,-3898)},
    {"Muscle King Area",  Vector3.new(-8626,16,-5730)},
    {"Jungle Area",       Vector3.new(-8642,6,2381)},
}

for _, v in ipairs(tps) do
    teleportTab:AddButton("To " .. v[1], function() tpTo(v[2]) end)
end

-- ==================== REBIRTH ====================
rebirthTab:AddSwitch("Auto Rebirth (Infinite)", function(s)
    states.AutoRebirth = s
    if s then
        task.spawn(function()
            while states.AutoRebirth and getgenv().NexusRunning do
                pcall(function()
                    local r = ReplicatedStorage:FindFirstChild("rEvents")
                    if r and r:FindFirstChild("rebirthRemote") then
                        r.rebirthRemote:InvokeServer("rebirthRequest")
                    end
                end)
                task.wait(0.1)
            end
        end)
    end
end)

rebirthTab:AddInput("Target Rebirths", function(val)
    local n = tonumber(val)
    if n and n > 0 then targetRebirths = n end
end)

rebirthTab:AddSwitch("Auto Rebirth to Target", function(s)
    states.AutoRebirthTarget = s
    if s then
        task.spawn(function()
            while states.AutoRebirthTarget and getgenv().NexusRunning do
                local reb = LocalPlayer.leaderstats and LocalPlayer.leaderstats.Rebirths
                if reb and reb.Value >= targetRebirths then states.AutoRebirthTarget = false return end
                pcall(function()
                    local r = ReplicatedStorage:FindFirstChild("rEvents")
                    if r and r:FindFirstChild("rebirthRemote") then r.rebirthRemote:InvokeServer("rebirthRequest") end
                end)
                task.wait(0.11)
            end
        end)
    end
end)

rebirthTab:AddSwitch("Auto Size 2", function(s)
    if s then
        getgenv().sizeLoop = task.spawn(function()
            while getgenv().NexusRunning do
                pcall(function()
                    local r = ReplicatedStorage:FindFirstChild("rEvents")
                    if r and r:FindFirstChild("changeSpeedSizeRemote") then
                        r.changeSpeedSizeRemote:InvokeServer("changeSize", 2)
                    end
                end)
                task.wait(0.08)
            end
        end)
    else
        if getgenv().sizeLoop then task.cancel(getgenv().sizeLoop) getgenv().sizeLoop = nil end
    end
end)

-- ==================== KILLER (with Good/Evil Karma) ====================
killerTab:AddSwitch("Kill Aura (All)", function(s)
    states.KillAura = s
    if s then
        task.spawn(function()
            while states.KillAura and getgenv().NexusRunning do
                for _, plr in Players:GetPlayers() do
                    if plr ~= LocalPlayer then simpleKill(plr) end
                end
                task.wait(0.12)
            end
        end)
    end
end)

local playerDropdown = killerTab:AddDropdown("Select Target", function(val)
    selectedTarget = val and val:match("^([^|]+)") or nil
end)

killerTab:AddSwitch("Auto Kill Selected", function(s)
    states.AutoKillSelected = s
    if s and selectedTarget then
        task.spawn(function()
            while states.AutoKillSelected and getgenv().NexusRunning do
                local plr = Players:FindFirstChild(selectedTarget)
                if plr then simpleKill(plr) end
                task.wait(0.12)
            end
        end)
    end
end)

-- GOOD KARMA KILL (kills players with MORE GOOD KARMA → you gain Evil Karma)
killerTab:AddSwitch("Kill Good Karma Players", function(s)
    states.KillGoodKarma = s
    if s then
        task.spawn(function()
            while states.KillGoodKarma and getgenv().NexusRunning do
                for _, plr in Players:GetPlayers() do
                    if plr ~= LocalPlayer then
                        karmaKill(plr, true)  -- true = target good karma players
                    end
                end
                task.wait(0.1)
            end
        end)
    end
end)

-- EVIL KARMA KILL (kills players with MORE EVIL KARMA → you gain Good Karma)
killerTab:AddSwitch("Kill Evil Karma Players", function(s)
    states.KillEvilKarma = s
    if s then
        task.spawn(function()
            while states.KillEvilKarma and getgenv().NexusRunning do
                for _, plr in Players:GetPlayers() do
                    if plr ~= LocalPlayer then
                        karmaKill(plr, false) -- false = target evil karma players
                    end
                end
                task.wait(0.1)
            end
        end)
    end
end)

-- Auto update dropdown
task.spawn(function()
    while getgenv().NexusRunning do
        local opts = {}
        for _, p in Players:GetPlayers() do
            if p ~= LocalPlayer then
                table.insert(opts, p.Name .. " | " .. (p.DisplayName or p.Name))
            end
        end
        playerDropdown:SetValues(opts)
        task.wait(6)
    end
end)

-- ==================== MISC ====================
miscTab:AddSwitch("Infinite Jump", toggleInfiniteJump)
miscTab:AddSwitch("Anti-AFK", toggleAntiAfk)

miscTab:AddButton("Unequip All Pets", function()
    pcall(function()
        local pets = LocalPlayer:FindFirstChild("petsFolder")
        local r = ReplicatedStorage:FindFirstChild("rEvents")
        if pets and r and r:FindFirstChild("equipPetEvent") then
            for _, folder in pairs(pets:GetChildren()) do
                for _, pet in pairs(folder:GetChildren()) do
                    r.equipPetEvent:FireServer("unequipPet", pet)
                end
            end
        end
    end)
end)

print("✅ Invincible Paid FULL Script Loaded – Good/Evil Karma Kill Added")
print("Made cleaner & safer for 2026")
