-- Load UI Library
local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library", true))()
local window = library:AddWindow("Invincibles Priv Script", {
    main_color = Color3.fromRGB(0, 0, 0),
    min_size = Vector2.new(470, 470),
    can_resize = false,
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")

local muscleEvent = nil
local function getMuscleEvent()
    -- Wait for muscleEvent in Player or game
    muscleEvent = LocalPlayer:FindFirstChild("muscleEvent") or workspace:FindFirstChild("muscleEvent")
end
getMuscleEvent()

-- Simple Teleport Function
local function tpTo(pos)
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if hrp then
        hrp.CFrame = CFrame.new(pos)
        print("Teleported to", pos)
    end
end

-- Basic Teleports
local teleportTab = window:AddTab("Teleport")
teleportTab:AddButton("To Spawn / Safe Area", function() tpTo(Vector3.new(-6, 5, -196)) end)
teleportTab:AddButton("To Secret Area", function() tpTo(Vector3.new(1947, 2, 6191)) end)

-- Auto Rebirth
local autoRebirth = false
local function autoRebirthFunc()
    while autoRebirth do
        pcall(function()
            local rEvents = ReplicatedStorage:FindFirstChild("rEvents")
            if rEvents then
                local rebirthRemote = rEvents:FindFirstChild("rebirthRemote")
                if rebirthRemote then
                    rebirthRemote:InvokeServer("rebirthRequest")
                    print("Rebirth requested")
                end
            end
        end)
        wait(0.1)
    end
end

local rebirthTab = window:AddTab("Rebirth")
rebirthTab:AddSwitch("Auto Rebirth", function(state)
    autoRebirth = state
    if state then
        task.spawn(autoRebirthFunc)
        print("Auto Rebirth enabled")
    end
end)

-- Kill All Players
local killAura = false
local function killAll()
    while killAura do
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer and plr.Character then
                local char = plr.Character
                local hrp = char:FindFirstChild("HumanoidRootPart")
                if hrp and LocalPlayer.Character then
                    -- Simulate attack (touch)
                    local myChar = LocalPlayer.Character
                    local myHRP = myChar:FindFirstChild("HumanoidRootPart")
                    if myHRP then
                        firetouchinterest(hrp, myHRP, 0)
                        firetouchinterest(hrp, myHRP, 1)
                    end
                end
            end
        end
        wait(0.1)
    end
end

local killTab = window:AddTab("Kill")
killTab:AddSwitch("Kill All Players", function(state)
    killAura = state
    if state then
        task.spawn(killAll)
        print("Killing all players")
    end
end)

-- Infinite Jump
local infJump = false
MiscTab = window:AddTab("Misc")
MiscTab:AddSwitch("Infinite Jump", function(state)
    infJump = state
end)
UserInputService.JumpRequest:Connect(function()
    if infJump and LocalPlayer.Character then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)

-- Basic Auto Farm Rock (example)
local autoFarm = false
local function autoFarmRocks(durabilityNeeded)
    while autoFarm do
        for _, v in pairs(workspace:FindFirstChild("machinesFolder"):GetDescendants()) do
            if v.Name == "neededDurability" and v.Value == durabilityNeeded then
                local char = LocalPlayer.Character
                if char and char:FindFirstChild("LeftHand") and char:FindFirstChild("RightHand") then
                    firetouchinterest(v.Parent.Rock, char.RightHand, 0)
                    firetouchinterest(v.Parent.Rock, char.RightHand, 1)
                    firetouchinterest(v.Parent.Rock, char.LeftHand, 0)
                    firetouchinterest(v.Parent.Rock, char.LeftHand, 1)
                end
            end
        end
        wait(0.2)
    end
end

local rockFarmTab = window:AddTab("Rock Farm")
rockFarmTab:AddToggle("Farm Tiny Island Rock", {
    Default = false,
    Callback = function(val)
        autoFarm = val
        if val then autoFarmRocks(0) end
    end
})

-- Note: You can add more rock farming toggles similarly.

-- END OF SCRIPT
print("Script loaded. Use the UI buttons to activate features.")
