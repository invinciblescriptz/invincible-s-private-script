local library = loadstring(game:HttpGet("https://raw.githubusercontent.com/memejames/elerium-v2-ui-library/main/Library", true))()
local window = library:AddWindow("Invincibles Priv Script", {
    main_color = Color3.fromRGB(0, 0, 0),
    min_size = Vector2.new(470, 470),
    can_resize = false,
})

local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local workspace = game:GetService("Workspace")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local UserInputService = game:GetService("UserInputService")

local muscleEvent = LocalPlayer:WaitForChild("muscleEvent", 10)

-- AUTO REP FUNCTION
local function startAutoRep(toolName, toggleVar)
    task.spawn(function()
        while _G[toggleVar] do
            pcall(function()
                local char = LocalPlayer.Character
                if not char or not char:FindFirstChild("Humanoid") or char.Humanoid.Health <= 0 then task.wait(1.5) return end
                local tool = LocalPlayer.Backpack:FindFirstChild(toolName) or char:FindFirstChild(toolName)
                if tool and tool.Parent ~= char then
                    char.Humanoid:EquipTool(tool)
                end
                if muscleEvent then
                    muscleEvent:FireServer("rep")
                end
            end)
            task.wait(0.025)
        end
        -- Unequip tool when toggled off
        pcall(function()
            local char = LocalPlayer.Character
            if char then
                local eq = char:FindFirstChild(toolName)
                if eq then eq.Parent = LocalPlayer.Backpack end
            end
        end)
    end)
end

-- Main Tabs and Folders
local main = window:AddTab("Main")
local Tools = main:AddFolder("Tools")
local RockFarmFolder = main:AddFolder("Rock Farm")
local BetterFarmingTab = window:AddTab("better farming")
local TeleportTab = window:AddTab("Teleport")
local KillTab = window:AddTab("Kill")
local MiscTab = window:AddTab("Misc")
local rebirthTab = window:AddTab("rebirth")
local AutoFarmTab = window:AddTab("AutoFarm")
local AutoFarmGymFolder = AutoFarmTab:AddFolder("Auto Farm Gym")

-- Tools Switches
Tools:AddSwitch("Auto Pushups", function(state)
    _G.AutoPushups = state
    if state then startAutoRep("Pushups", "AutoPushups") end
end)
Tools:AddSwitch("Auto Weight", function(state)
    _G.AutoWeight = state
    if state then startAutoRep("Weight", "AutoWeight") end
end)
Tools:AddSwitch("Auto Handstands", function(state)
    _G.AutoHandstands = state
    if state then startAutoRep("Handstands", "AutoHandstands") end
end)
Tools:AddSwitch("Fast Punch", function(state)
    _G.FastPunch = state
    if state then
        task.spawn(function()
            while _G.FastPunch do
                pcall(function()
                    if muscleEvent then
                        muscleEvent:FireServer("punch", "rightHand")
                        muscleEvent:FireServer("punch", "leftHand")
                    end
                    local char = LocalPlayer.Character
                    if char and char:FindFirstChild("Punch") then
                        char.Punch:Activate()
                    end
                end)
                task.wait(0.07)
            end
        end)
    end
end)

Tools:AddButton("Anti Lag (Boost FPS)", function()
    local Lighting = game:GetService("Lighting")
    Lighting.GlobalShadows = false
    Lighting.Brightness = 1
    Lighting.ClockTime = 12
    Lighting.FogEnd = 9999
    Lighting.FogStart = 0
    for _, v in pairs(workspace:GetDescendants()) do
        if v:IsA("ParticleEmitter") or v:IsA("Smoke") or v:IsA("Fire") or v:IsA("Sparkles") or
           v:IsA("BloomEffect") or v:IsA("BlurEffect") or v:IsA("DepthOfFieldEffect") or v:IsA("SunRaysEffect") then
            v.Enabled = false
        end
    end
    settings().Rendering.QualityLevel = Enum.QualityLevel.Level01
    print("Anti-Lag activated â†’ check FPS (Shift+F5)")
end)

main:AddButton("Free AutoLift Gamepass", function()
    pcall(function()
        local gpFolder = ReplicatedStorage:FindFirstChild("gamepassIds")
        if gpFolder then
            local owned = LocalPlayer:FindFirstChild("ownedGamepasses") or Instance.new("Folder", LocalPlayer)
            owned.Name = "ownedGamepasses"
            for _, gp in pairs(gpFolder:GetChildren()) do
                local val = Instance.new("IntValue")
                val.Name = gp.Name
                val.Value = gp.Value
                val.Parent = owned
            end
            print("Gamepasses added (may require relog)")
        else
            print("gamepassIds not found in ReplicatedStorage")
        end
    end)
end)

-- Teleports
local function tpTo(pos)
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if hrp then hrp.CFrame = CFrame.new(pos) end
end

TeleportTab:AddButton("To Spawn / Safe Area", function() tpTo(Vector3.new(-6, 5, -196)) end)
TeleportTab:AddButton("To Secret Area", function() tpTo(Vector3.new(1947, 2, 6191)) end)
TeleportTab:AddButton("To Tiny Area", function() tpTo(Vector3.new(-39, 6, 1886)) end)
TeleportTab:AddButton("To Frozen Area", function() tpTo(Vector3.new(-2623, 6, -409)) end)
TeleportTab:AddButton("To Mythical Area", function() tpTo(Vector3.new(2251, 6, 1073)) end)
TeleportTab:AddButton("To Inferno Area", function() tpTo(Vector3.new(-6759, 6, -1285)) end)
TeleportTab:AddButton("To Legend Area", function() tpTo(Vector3.new(4603, 990, -3898)) end)
TeleportTab:AddButton("To Muscle King Area", function() tpTo(Vector3.new(-8626, 16, -5730)) end)
TeleportTab:AddButton("To Jungle Area", function() tpTo(Vector3.new(-8642, 6, 2381)) end)
TeleportTab:AddButton("To Lava Brawl", function() tpTo(Vector3.new(4471, 119, -8836)) end)
TeleportTab:AddButton("To Desert Brawl", function() tpTo(Vector3.new(960, 17, -7398)) end)
TeleportTab:AddButton("To Beach Brawl", function() tpTo(Vector3.new(-1849, 20, -6335)) end)

-- Kill Auto
local function checkCharacter()
    if not LocalPlayer.Character then LocalPlayer.CharacterAdded:Wait() end
    return LocalPlayer.Character
end

local function killPlayer(target)
    local char = checkCharacter()
    if not char or not char:FindFirstChild("LeftHand") then return end
    local tChar = target.Character
    if tChar and tChar:FindFirstChild("HumanoidRootPart") and tChar:FindFirstChild("Humanoid") and tChar.Humanoid.Health > 0 then
        firetouchinterest(tChar.HumanoidRootPart, char.LeftHand, 0)
        firetouchinterest(tChar.HumanoidRootPart, char.LeftHand, 1)
        local punch = LocalPlayer.Backpack:FindFirstChild("Punch") or char:FindFirstChild("Punch")
        if punch and char:FindFirstChild("Humanoid") then
            char.Humanoid:EquipTool(punch)
        end
        if muscleEvent then
            muscleEvent:FireServer("punch", "leftHand")
            muscleEvent:FireServer("punch", "rightHand")
        end
    end
end

KillTab:AddSwitch("Kill All Players (Aura)", function(state)
    getgenv().killAura = state
    if state then
        task.spawn(function()
            while getgenv().killAura do
                pcall(function()
                    for _, plr in pairs(Players:GetPlayers()) do
                        if plr ~= LocalPlayer and plr.Character then
                            killPlayer(plr)
                        end
                    end
                end)
                task.wait(0.08)
            end
        end)
    end
end)

local targetKillPlayer = nil
local playerDropdown = KillTab:AddDropdown("Select Target Player", {
    Title = "Single Target Kill",
    Values = {},
    Callback = function(selected)
        local name = selected:match("^([^|]+)") or selected
        targetKillPlayer = name
        print("Target set: " .. name)
    end
})

KillTab:AddSwitch("Auto Kill Selected", function(state)
    getgenv().autoSingleKill = state
    if state and targetKillPlayer then
        task.spawn(function()
            while getgenv().autoSingleKill do
                pcall(function()
                    local tgt = Players:FindFirstChild(targetKillPlayer)
                    if tgt then killPlayer(tgt) end
                end)
                task.wait(0.08)
            end
        end)
    end
end)

-- Update Player List
task.spawn(function()
    while true do
        local list = {}
        for _, plr in pairs(Players:GetPlayers()) do
            if plr ~= LocalPlayer then
                table.insert(list, plr.Name .. " | " .. plr.DisplayName)
            end
        end
        pcall(function()
            playerDropdown:SetValues(list)
        end)
        task.wait(5)
    end
end)

-- Rock Farming
local function gettool()
    local tool = LocalPlayer.Backpack:FindFirstChild("Punch")
    if tool then
        LocalPlayer.Character.Humanoid:EquipTool(tool)
    end
end

local function farmRocks(neededDurabilityValue)
    while _G.autoFarm do
        task.wait(0.1)
        local character = LocalPlayer.Character
        if character and LocalPlayer.Durability.Value >= neededDurabilityValue then
            for _, v in pairs(workspace.machinesFolder:GetDescendants()) do
                if v.Name == "neededDurability" and v.Value == neededDurabilityValue then
                    if character:FindFirstChild("LeftHand") and character:FindFirstChild("RightHand") then
                        firetouchinterest(v.Parent.Rock, character.RightHand, 0)
                        firetouchinterest(v.Parent.Rock, character.RightHand, 1)
                        firetouchinterest(v.Parent.Rock, character.LeftHand, 0)
                        firetouchinterest(v.Parent.Rock, character.LeftHand, 1)
                        gettool()
                    end
                end
            end
        end
        -- Auto punch if enabled
        if _G.fastHitActive then
            LocalPlayer:FindFirstChild("muscleEvent"):FireServer("punch", "rightHand")
            LocalPlayer:FindFirstChild("muscleEvent"):FireServer("punch", "leftHand")
            local punchTool = character:FindFirstChild("Punch")
            if punchTool then punchTool:Activate() end
        end
    end
end

-- Punch toggle
local _G.fastHitActive = false
AutoFarmTab:AddToggle("Punch", {
    Title = "Auto Punch",
    Description = "Auto Punch",
    Default = false,
    Callback = function(val)
        _G.fastHitActive = val
        if val then
            task.spawn(function()
                local function equipAndModifyPunch()
                    while _G.fastHitActive do
                        local player = game.Players.LocalPlayer
                        local punch = player.Backpack:FindFirstChild("Punch")
                        if punch then
                            punch.Parent = player.Character
                            if punch:FindFirstChild("attackTime") then
                                punch.attackTime.Value = 0
                            end
                        end
                        wait(0)
                    end
                end
                local function rapidPunch()
                    while _G.fastHitActive do
                        local player = game.Players.LocalPlayer
                        player.muscleEvent:FireServer("punch", "rightHand")
                        player.muscleEvent:FireServer("punch", "leftHand")
                        local character = player.Character
                        if character then
                            local punchTool = character:FindFirstChild("Punch")
                            if punchTool then
                                punchTool:Activate()
                            end
                        end
                        wait(0)
                    end
                end
                coroutine.wrap(equipAndModifyPunch)()
                coroutine.wrap(rapidPunch)()
            end)
        end
    end
})

-- Auto Strength Gain
local fastStrengthRunning = false
local function startStrengthAutomation()
    while fastStrengthRunning do
        pcall(function()
            local rEvents = ReplicatedStorage:WaitForChild("rEvents", 5)
            if rEvents then
                local remote = rEvents:FindFirstChild("strengthRemote")
                if remote then
                    remote:InvokeServer("strength")
                end
            end
        end)
        task.wait(0.1)
    end
end

BetterFarmingTab:AddSwitch("Fast Strength Gain", function(state)
    fastStrengthRunning = state
    if state then
        startStrengthAutomation()
        print("Fast Strength ENABLED")
    else
        print("Fast Strength DISABLED")
    end
end)

-- Misc
MiscTab:AddSwitch("Infinite Jump", function(state)
    getgenv().infJump = state
end)

UserInputService.JumpRequest:Connect(function()
    if getgenv().infJump and LocalPlayer.Character then
        LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
    end
end)

-- Rebirth
rebirthTab:AddSwitch("Auto Rebirth (Infinite)", function(state)
    getgenv().autoRebirth = state
    if state then
        task.spawn(function()
            while getgenv().autoRebirth do
                pcall(function()
                    local rEvents = ReplicatedStorage:WaitForChild("rEvents", 5)
                    if rEvents then
                        local rebirthRemote = rEvents:FindFirstChild("rebirthRemote")
                        if rebirthRemote then
                            rebirthRemote:InvokeServer("rebirthRequest")
                        end
                    end
                end)
                task.wait(0.1)
            end
        end)
        print("Auto Rebirth ENABLED")
    end
end)

rebirthTab:AddSwitch("Auto Size 2", function(state)
    if state then
        getgenv().autoSizeLoop = task.spawn(function()
            while true do
                pcall(function()
                    local rEvents = ReplicatedStorage:WaitForChild("rEvents", 5)
                    if rEvents and rEvents:FindFirstChild("changeSpeedSizeRemote") then
                        rEvents.changeSpeedSizeRemote:InvokeServer("changeSize", 2)
                    end
                end)
                task.wait(0.05)
            end
        end)
        print("Auto Size 2 ENABLED")
    else
        if getgenv().autoSizeLoop then task.cancel(getgenv().autoSizeLoop) end
        print("Auto Size 2 DISABLED")
    end
end)

rebirthTab:AddSwitch("Auto Teleport to Muscle King", function(state)
    if state then
        getgenv().kingTeleportLoop = task.spawn(function()
            while true do
                pcall(function()
                    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
                    if hrp then hrp.CFrame = CFrame.new(-8646, 17, -5738) end
                end)
                task.wait(0.05)
            end
        end)
        print("Auto TP to King ENABLED")
    else
        if getgenv().kingTeleportLoop then task.cancel(getgenv().kingTeleportLoop) end
        print("Auto TP to King DISABLED")
    end
end)

rebirthTab:AddSwitch("Hide All Frames", function(state)
    pcall(function()
        for _, obj in pairs(ReplicatedStorage:GetDescendants()) do
            if obj:IsA("Frame") or obj.Name:match("Frame$") then obj.Visible = not state end
        end
        for _, obj in pairs(LocalPlayer.PlayerGui:GetDescendants()) do
            if obj:IsA("Frame") then obj.Visible = not state end
        end
    end)
    print("Hide Frames " .. (state and "ENABLED" or "DISABLED"))
end)

local fastRebirthRunning = false
local function startRebirthAutomation()
    while fastRebirthRunning do
        pcall(function()
            local rEvents = ReplicatedStorage:WaitForChild("rEvents", 5)
            if rEvents then
                local rebirthRemote = rEvents:FindFirstChild("rebirthRemote")
                if rebirthRemote then
                    rebirthRemote:InvokeServer("rebirthRequest")
                end
            end
        end)
        task.wait(0.07)
    end
end

rebirthTab:AddSwitch("Fast Rebirth Spam", function(state)
    fastRebirthRunning = state
    if state then
        startRebirthAutomation()
        print("Fast Rebirth Spam ENABLED")
    else
        print("Fast Rebirth Spam DISABLED")
    end
end)

-- Target Rebirth to specific amount
local targetRebirthValue = 1
local targetRebirthRunning = false

rebirthTab:AddSwitch("Auto Rebirth to Target", function(state)
    targetRebirthRunning = state
    if state then
        task.spawn(function()
            print("Target Rebirth started - goal: " .. targetRebirthValue)
            while targetRebirthRunning do
                pcall(function()
                    local current = LocalPlayer.leaderstats.Rebirths.Value
                    if current >= targetRebirthValue then
                        targetRebirthRunning = false
                        print("Target reached! Stopping rebirth. Current: " .. current)
                        return
                    end
                    local rEvents = ReplicatedStorage:WaitForChild("rEvents", 5)
                    if rEvents and rEvents:FindFirstChild("rebirthRemote") then
                        rEvents.rebirthRemote:InvokeServer("rebirthRequest")
                    end
                end)
                task.wait(0.1)
            end
        end)
    else
        print("Target Rebirth stopped")
    end
end)

-- Note: To set the target rebirth amount, change the 'targetRebirthValue' variable.
print("To set target rebirth amount, change 'targetRebirthValue = 1' in the script.")

-- Auto farming rocks at specific locations
local selectrock = ""

local function gettool()
    local tool = LocalPlayer.Backpack:FindFirstChild("Punch")
    if tool then
        LocalPlayer.Character.Humanoid:EquipTool(tool)
    end
end

local function autoFarmRocks(neededDurability)
    while _G.autoFarm do
        task.wait(0.1)
        if LocalPlayer.Durability.Value >= neededDurability then
            for _, v in pairs(workspace.machinesFolder:GetDescendants()) do
                if v.Name == "neededDurability" and v.Value == neededDurability then
                    if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("LeftHand") and LocalPlayer.Character:FindFirstChild("RightHand") then
                        firetouchinterest(v.Parent.Rock, LocalPlayer.Character.RightHand, 0)
                        firetouchinterest(v.Parent.Rock, LocalPlayer.Character.RightHand, 1)
                        firetouchinterest(v.Parent.Rock, LocalPlayer.Character.LeftHand, 0)
                        firetouchinterest(v.Parent.Rock, LocalPlayer.Character.LeftHand, 1)
                        gettool()
                    end
                end
            end
        end
        -- Auto punch if enabled
        if _G.fastHitActive then
            LocalPlayer:FindFirstChild("muscleEvent"):FireServer("punch", "rightHand")
            LocalPlayer:FindFirstChild("muscleEvent"):FireServer("punch", "leftHand")
            local punchTool = LocalPlayer.Character:FindFirstChild("Punch")
            if punchTool then punchTool:Activate() end
        end
    end
end

-- Example toggle for specific rocks
local function createRockFarmToggle(name, durability)
    AutoFarmTab:AddToggle(name, {
        Title = name,
        Description = "Farm rocks with durability " .. durability,
        Default = false,
        Callback = function(val)
            _G.autoFarm = val
            if val then
                autoFarmRocks(durability)
            end
        end
    })
end

createRockFarmToggle("Tiny Island Rock", 0)
createRockFarmToggle("Starter Island Rock", 100)
createRockFarmToggle("Legend Beach Rock", 5000)
createRockFarmToggle("Frost Gym Rock", 150000)
createRockFarmToggle("Mythical Gym Rock", 400000)
createRockFarmToggle("Eternal Gym Rock", 750000)
createRockFarmToggle("Legend Gym Rock", 1000000)
createRockFarmToggle("Muscle King Gym Rock", 5000000)
createRockFarmToggle("Ancient Jungle Rock", 10000000)
createRockFarmToggle("Legend Gym Rock", 1000000)
createRockFarmToggle("Jungle Gym", 0)

-- Auto Gym Training
local function pressE()
    local vim = game:GetService("VirtualInputManager")
    vim:SendKeyEvent(true, "E", false, game)
    task.wait(0.1)
    vim:SendKeyEvent(false, "E", false, game)
end

local function autoLift()
    while getgenv().working and task.wait() do
        game:GetService("Players").LocalPlayer.muscleEvent:FireServer("rep")
    end
end

local function teleportAndStart(machineName, position)
    if game.Players.LocalPlayer.Character and game.Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
        game.Players.LocalPlayer.Character.HumanoidRootPart.CFrame = position
        task.wait(0.1)
        pressE()
        autoLift()
    end
end

local gymLocations = {
    ["Frost Gym"] = CFrame.new(-3009, 38, -338),
    ["Mythical Gym"] = CFrame.new(2369, 38, 1243),
    ["Eternal Gym"] = CFrame.new(-7174, 45, -1106),
    ["Legend Gym"] = CFrame.new(4109, 1020, -3803),
    ["Muscle King Gym"] = CFrame.new(-8590.06152, 46.0167427, -6043.34717),
    ["Jungle Gym"] = CFrame.new(-8629.88086, 64.8842468, 1855.03467),
}

local function createGymToggle(name, location)
    AutoFarmGymFolder:AddToggle(name, {
        Title = "Farm " .. name,
        Description = "Auto train at " .. name,
        Default = false,
        Callback = function(val)
            getgenv().working = val
            if val then
                teleportAndStart(name, gymLocations[name])
            end
        end
    })
end

for gymName, _ in pairs(gymLocations) do
    createGymToggle(gymName, gymLocations[gymName])
end
